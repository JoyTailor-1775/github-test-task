(this["webpackJsonpgithub-test-task"]=this["webpackJsonpgithub-test-task"]||[]).push([[0],{32:function(e,t,r){e.exports=r(70)},37:function(e,t,r){},38:function(e,t,r){},68:function(e,t,r){},69:function(e,t,r){},70:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(8),c=r.n(o),s=(r(37),r(38),r(1)),u=r.n(s),i=r(3),p=r(9),l=r(10),h=r(14),f=r(13),g=r(28),d=r.n(g),m=r(5),b=(r(50),"repos/GET_REPOS_SUCCESS"),v="repos/UPDATE_QUERY_REQUEST",y="repos/FETCH_REQUEST",S="repos/FETCH_ERROR",k="repos/FETCH_SUCCESS",E="repos/CHANGE_CANCEL_TOKEN",O={getRepos:function(e){return{type:b,payload:e}},updateQueryRequest:function(e){return{type:v,payload:e}},fetchRequest:function(){return{type:y}},fetchError:function(e){return{type:S,payload:e}},fetchSuccess:function(){return{type:k}},changeCancelToken:function(e){return{type:E,payload:e}}},C=r(6),w=r.n(C),R=function(){var e="";for(var t in localStorage)localStorage.hasOwnProperty(t)&&(e+=localStorage[t]);return 2*e.length},_=function(e){var t=e.items.map((function(e){return{name:e.name,full_name:e.full_name,stargazers_count:e.stargazers_count}}));return{total_count:e.total_count,items:t}},j=function(e){return JSON.parse(localStorage.getItem(e))},q=function(){var e=Object(i.a)(u.a.mark((function e(t,r){var n,a,o,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=_(r),a=JSON.stringify(n),o=2*a.length,e.prev=3,e.next=6,navigator.storage.estimate().then((function(e){return e.quota}));case 6:for(e.t0=e.sent,e.t1=R(),c=e.t0-e.t1;o>=c;)localStorage.removeItem(localStorage.key(0));localStorage.setItem(t,a),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(3),console.error("This browser does not support LocalStorage tools:",e.t2);case 16:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t,r){return e.apply(this,arguments)}}(),x=function(){var e=Object(i.a)(u.a.mark((function e(t,r){var n,a,o,c,s,i,p;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.name,a=t.page,o=t.order,c="https://api.github.com/search/repositories?q=".concat(n,"&page=").concat(a+1,"&per_page=30"),s=o?"".concat(c,"&sort=stars&order=").concat(o):c,e.prev=3,e.next=6,j(s);case 6:if(!(i=e.sent)){e.next=9;break}return e.abrupt("return",i);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.error("LocalStorage error: ",e.t0);case 14:return e.next=16,w.a.get(s,{cancelToken:r.token}).then((function(e){try{q(s,e.data)}catch(t){console.error("LocalStorage error: ",t)}finally{return e.data}})).catch((function(e){w.a.isCancel(e)?console.log(e.message):console.error("GitHub API error: ",e)}));case 16:return p=e.sent,e.abrupt("return",p);case 18:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t,r){return e.apply(this,arguments)}}(),T={requestRepos:function(e,t){return function(){var r=Object(i.a)(u.a.mark((function r(n){var a;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n(O.fetchRequest()),r.prev=1,r.next=4,x(e,t);case 4:a=r.sent,n(O.getRepos(a)),n(O.fetchSuccess()),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(1),n(O.fetchError(r.t0.message));case 12:case"end":return r.stop()}}),r,null,[[1,9]])})));return function(e){return r.apply(this,arguments)}}()}},H=Object.freeze({ASC:"asc",DESC:"desc"}),N=function(e){Object(h.a)(r,e);var t=Object(f.a)(r);function r(){var e;return Object(p.a)(this,r),(e=t.call(this)).fetchApiRequest=Object(i.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.getRepos(e.props.query,e.props.cancelToken);case 2:case"end":return t.stop()}}),t)}))),e.onPageChange=function(){var t=Object(i.a)(u.a.mark((function t(r){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.updateQuery({page:r});case 2:return t.next=4,e.fetchApiRequest();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onSortTable=Object(i.a)(u.a.mark((function t(){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.query.order===H.DESC?H.ASC:H.DESC,t.next=3,e.props.updateQuery({order:r});case 3:if(e.props.query.name){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,e.fetchApiRequest();case 7:case"end":return t.stop()}}),t)}))),e.state={pageSize:30},e}return Object(l.a)(r,[{key:"render",value:function(){var e=this.state.pageSize;return a.a.createElement("div",null,a.a.createElement(d.a,{columns:[{Header:"Repository Name",accessor:"name",sortable:!1},{Header:"Full Name",accessor:"full_name",sortable:!1},{Header:"Stars",accessor:"stargazers_count"}],manual:!0,data:this.props.repos.items,pages:Math.ceil(this.props.repos.total_count?this.props.repos.total_count<1e3?this.props.total_count/this.state.pageSize:1e3/this.state.pageSize:0),loading:this.props.loading,sortable:!0,resizable:!1,onSortedChange:this.onSortTable,defaultPageSize:e,showPageSizeOptions:!1,page:this.props.query.page,onPageChange:this.onPageChange,className:"-striped -highlight"}))}}]),r}(a.a.Component),z={getRepos:T.requestRepos,updateQuery:O.updateQueryRequest},Q=Object(m.b)((function(e){return{repos:e.gitHub.repos,query:e.gitHub.query,loading:e.gitHub.loading,cancelToken:e.gitHub.cancelToken}}),z)(N),P=r(11),A=r(12),D=(r(68),w.a.CancelToken),U={searchReq:""};Object.freeze(U);var I=function(e){Object(h.a)(r,e);var t=Object(f.a)(r);function r(){var e;return Object(p.a)(this,r),(e=t.call(this)).onChange=function(t){e.setState(Object(A.a)({},t.target.name,t.target.value))},e.onSearch=function(){var t=Object(i.a)(u.a.mark((function t(r){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),e.state.searchReq){t.next=3;break}return t.abrupt("return");case 3:return e.props.changeCancelToken(D.source()),n={name:e.state.searchReq.trim(),page:0},t.next=7,e.props.updateQuery(n);case 7:return t.next=9,e.props.getRepos(e.props.query,e.props.cancelToken);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onSearchCancel=Object(i.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState(Object(P.a)({},U)),t.next=3,e.props.updateQuery({name:"",page:0});case 3:e.props.cancelToken.cancel("Cancelled by user...");case 4:case"end":return t.stop()}}),t)}))),e.state={searchReq:""},e}return Object(l.a)(r,[{key:"componentDidMount",value:function(){this.props.changeCancelToken(D.source())}},{key:"render",value:function(){return a.a.createElement("form",{className:"search-panel",onSubmit:this.onSearch},a.a.createElement("input",{name:"searchReq",className:"search-panel__input",value:this.state.searchReq,onChange:this.onChange,maxLength:"30"}),a.a.createElement("div",{className:"controls"},a.a.createElement("button",{className:"controls__button controls__button--action",type:"submit"},"Search"),a.a.createElement("button",{className:"controls__button controls__button--cancel",type:"reset",onClick:this.onSearchCancel},"X")))}}]),r}(n.PureComponent),L={getRepos:T.requestRepos,updateQuery:O.updateQueryRequest,changeCancelToken:O.changeCancelToken},F=Object(m.b)((function(e){return{query:e.gitHub.query,repos:e.gitHub.repos,cancelToken:e.gitHub.cancelToken}}),L)(I),J=(r(69),function(){return a.a.createElement("main",{className:"page-content"},a.a.createElement(F,null),a.a.createElement(Q,null))}),M=function(){return a.a.createElement(J,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var G=r(4),W=r(30),B=r(31),K={name:"",page:0,order:null};var X=Object(G.combineReducers)({loading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,r=t.type;switch(r){case y:return!0;case k:case S:return!1;default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,r=t.type,n=t.payload;switch(r){case y:return null;case S:return n;default:return e}},repos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=t.type,n=t.payload;switch(r){case b:return n;default:return e}},query:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(P.a)({},K),t=arguments.length>1?arguments[1]:void 0,r=t.type,n=t.payload;switch(r){case v:var a=Object.assign(e,n);return a;default:return K}},cancelToken:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,r=t.type,n=t.payload;switch(r){case E:return n;default:return e}}}),Y=Object(G.combineReducers)({gitHub:X}),$=Object(G.applyMiddleware)(B.a),V=Object(W.composeWithDevTools)($),Z=Object(G.createStore)(Y,V);c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(m.a,{store:Z},a.a.createElement(M,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[32,1,2]]]);
//# sourceMappingURL=main.4572d7c3.chunk.js.map